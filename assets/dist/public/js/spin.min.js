!function(e){"use strict";e(document).ready(function(){let t=document.querySelectorAll(".wheel .slice"),l=document.querySelector(".try-your-luck"),n=document.querySelector(".wheel"),u=0,o=spinToWinData.spinPerEmail,r=1e3*spinToWinData.delayBetweenSpin,i=1e3*spinToWinData.popupIntervalTime,s=spinToWinData.frontendMessageIfWin;spinToWinData.emailSubject,spinToWinData.emailContent;let a=spinToWinData.frontendMessageIfLoss;if(l){let c=document.querySelectorAll(".wheel .slice .value"),d=[],f=[],p=[];c.forEach(e=>{let t=e.innerText,l=e.getAttribute("data-value"),n=e.getAttribute("data-label");d.unshift(t),f.unshift(l),p.unshift(n)}),l.addEventListener("click",function(){let i=document.querySelector(".custom-input.name"),c=document.querySelector(".custom-input.email"),y=document.querySelector("#termCondition");if(i){var m=document.querySelector(".custom-input.name").value;if(!m){alert("You must fill up the name field.");return}}if(c){var h=document.querySelector(".custom-input.email").value;if(!h){alert("You must fill up the email field.");return}}if(!y.checked){alert("You must agree with the terms and conditions.");return}if(u<o){l.disabled=!0,l.style.cursor="not-allowed";let S=360/t.length,g=Math.floor(49*Math.random())*S;n.style.rotate=g+"deg";let $=g%360/S-1;setTimeout(function(){if("NON"==d[$]){alert(a+"\nDiscount Details: "+p[$]),setTimeout(function(){l.disabled=!1,l.style.cursor="pointer"},r);return}alert(s+"\nDiscount Details: "+p[$]);let t={action:"update_spin_count",couponValue:f[$],couponType:d[$]};m&&(t.userName=m),h&&(t.userEmail=h),e.ajax({url:spinToWinData.ajax_url,type:"POST",data:t,success:function(e){if(e.success){let t=e.data;console.log("Spin count successfully updated to: "+t)}else e.data&&e.data.message?alert(e.data.message):console.log("Failed to update spin count.")},error:function(){console.log("An error occurred while updating the spin count.")}}),++u<o?(console.log(o),setTimeout(function(){l.disabled=!1,l.style.cursor="pointer"},r)):(alert("You have reached the maximum number of spins!"),l.style.cursor="not-allowed")},4e3)}else alert("You have already used all your spins!")})}else console.error("The 'TRY YOUR LUCK' button was not found.");let y=document.querySelector(".spinToWin .close");y?y.addEventListener("click",function(){let e=document.querySelector(".spinToWin");e&&(e.style.display="none",setTimeout(function(){e.style.display="block"},i))}):console.error("The 'CLOSE' button was not found.")})}(jQuery);